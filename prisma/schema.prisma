generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

enum SourcePlatform {
  INSTAGRAM
  TIKTOK
  UNKNOWN
}

model Recipe {
  id               String         @id @default(cuid())
  userId           String
  sourceUrl        String
  sourcePlatform   SourcePlatform @default(UNKNOWN)
  title            String?
  ingredientsList  Json?
  instructionsList Json?
  originalCreator  String?
  thumbnailUrl     String?
  createdAt        DateTime       @default(now())
  updatedAt        DateTime       @updatedAt

  @@index([userId])
  @@unique([userId, sourceUrl])
}

model GroceryList {
  id            String   @id @default(cuid())
  userId        String
  name          String
  items         Json
  sourceRecipes Json?
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  @@index([userId])
}
